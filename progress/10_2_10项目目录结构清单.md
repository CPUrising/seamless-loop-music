# 项目目录结构清单 (Current Project Structure)

**更新日期**：2026-02-11  
**整理人**：莱芙・泽诺 (Lev Zenith)

---

## 1. 根目录结构 (`D:\seamless loop music\seamless loop music`)

| 名称 | 类型 | 说明 |
| :--- | :--- | :--- |
| `seamless loop music.sln` | 文件 | 解决方案文件 (Visual Studio Solution) |
| `seamless loop music/` | 目录 | **核心项目源代码目录** |
| `progress/` | 目录 | 开发迭代工作日志与技术方案存档 |
| `Final_Release/` | 目录 | 最终发布版本的归档 |
| `Release_Build/` | 目录 | 编译输出的可执行包 |
| `TODO_ORGANIZED.md` | 文件 | 整理后的待办事项清单 |
| `README.md` | 文件 | 项目中文说明文档 |
| `README_EN.md` | 文件 | 项目英文说明文档 |
| `.gitignore` | 文件 | Git 忽略配置清单 |

---

## 2. 源代码目录 (`...\seamless loop music\seamless loop music`)

这是程序的核心实现所在目录，已按照功能模块进行了完善的分层设计。

| 模块 | 文件名 | 说明 |
| :--- | :--- | :--- |
| **入口与配置** | | |
| | `App.xaml / .cs` | 应用程序入口，包含全局资源和异常捕获逻辑 |
| | `seamless loop music.csproj` | 项目配置文件 (C# Project) |
| | `DEVELOPER_MANUAL.md` | 开发者手册 (详细技术文档) |
| **Services (服务层)** | | |
| | **`PlayerService.cs`** | **核心业务逻辑控制器**。统筹音频播放、切歌逻辑、数据库读写、UI状态同步 (WPF MVVM模式的核心) |
| **Core (核心引擎)** | | |
| | `AudioLooper.cs` | 音频控制引擎，封装了 NAudio 的底层操作、播放、停止、音量与进度控制 |
| | `LoopStream.cs` | 自定义音频流实现，负责处理 Sample 级别的无缝循环跳转逻辑 |
| **Data (数据层)** | | |
| | `DatabaseHelper.cs` | 数据库访问层 (DAL)。基于 SQLite + Dapper，管理 `LoopPoints`, `Playlists`, `PlaylistItems` 表 |
| **Models (数据模型)** | | |
| | `MusicTrack.cs` | 音乐轨道实体类。包含文件元数据、循环点信息、别名、数据库 ID 等 |
| | `PlaylistFolder.cs` | 歌单文件夹辅助类，用于 UI 绑定 |
| **UI (界面层)** | | |
| | `MainWindow.xaml / .cs` | 主界面及交互逻辑，包含列表展示、右键菜单、快捷键处理、拖拽交互 |
| | `FolderPicker.cs` | 封装的文件夹选择器类 (使用 Windows Forms 交互) |
| **资源** | | |
| | `Properties/` | 包含 `Resources.resx` (EN) 和 `Resources.zh-CN.resx` 本地化资源 |

### 关键目录说明：

- **Services**: 这是 v3.0 重构引入的新层级，将复杂的播放逻辑从 UI 中剥离，不仅降低了耦合度，还为未来的多界面支持打下了基础。
- **Data**: 随着 SQLite 的全面引入，该层级承担了所有配置持久化任务，确保数据的 ACID 特性。

---

## 3. 运维与进度目录 (`...\progress`)

用于追踪项目的开发历程和未来规划。

- `01` - `06`：项目初期到首个发布版本的详细记录。
- `07` - `09`：SQLite 迁移方案、本地化与稳定性修复。
- `10_项目目录结构清单.md`：(即本文件) **实时更新的项目结构快照**。
- `11_SQLite数据库迁移与架构升级报告.md`：记录了从 CSV 到 SQLite 的重大架构变迁。
- `12_MainWindow重构与PlayerService实现报告.md`：记录了 UI 与逻辑分离的重构过程。
- `13_播放列表模式与自动切歌功能实现报告.md`：多模式播放功能的实现细节。
- `14_虚拟歌单系统架构升级与 UI 交互完善报告.md`：虚拟歌单系统的详细设计文档。
- `15_全数据库化与健壮性修复.md`：最近一次关于数据库健壮性与路径追踪的更新报告。

---
**结构清单更新完毕。** 与当前代码库 (Commit: 2026-02-11) 保持一致。 (￣^￣)ゞ
